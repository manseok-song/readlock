# ReadLock 2.0 - Product Requirements Document

**Version:** 2.0  
**Date:** 2025년 1월  
**Author:** PubStation  
**Platform:** Flutter (Web + Android + iOS)

---

## 1. 제품 개요

### 1.1 비전

ReadLock 2.0은 개인의 독서 경험을 커뮤니티의 경험으로 확장하는 소셜 독서 플랫폼입니다. 폰 잠금 기반의 몰입형 독서 경험과 독서 기록, 커뮤니티 공유, AI 기반 추천을 결합하여 독서 문화의 새로운 패러다임을 제시합니다.

### 1.2 핵심 가치 제안

- **폰잠금 독서**: 스마트폰 알림을 차단하고 온전한 독서 몰입 환경 제공
- **소셜 독서**: 책속의 한줄, 감상평을 통한 독서 경험 공유
- **AI 추천**: 독서 성향 분석 기반 개인화된 도서 추천
- **오프라인 연결**: 독립서점 지도를 통한 로컬 독서 문화 활성화
- **게이미피케이션**: 아바타, 마이룸, 뱃지 시스템으로 독서 동기 부여

### 1.3 타겟 사용자

| 세그먼트 | 특성 | 니즈 |
|---------|------|------|
| MZ 독서가 | 20-35세, 월 2-4권 독서, SNS 활발 | 독서 기록 공유, 취향 맞는 책 발견 |
| 독서 입문자 | 독서 습관 형성 희망, 스마트폰 중독 | 독서 몰입 환경, 동기 부여 |
| 독서모임 참여자 | 오프라인 모임 활동, 독서 토론 선호 | 모임 관리, 의견 공유 플랫폼 |

### 1.4 플랫폼 전략

**"One Codebase, Three Platforms"** - Flutter를 활용한 크로스플랫폼 개발

```
┌─────────────────────────────────────────────────────────────┐
│                    Flutter (Dart)                           │
│              95%+ 코드 공유 / 단일 코드베이스                │
├─────────────┬─────────────────────────┬─────────────────────┤
│  📱 Android │       🍎 iOS            │      🌐 Web         │
│  Google Play│       App Store         │    PWA / 호스팅     │
│  1차 타겟   │       1차 타겟          │     2차 타겟        │
└─────────────┴─────────────────────────┴─────────────────────┘
```

---

## 2. 기능 요구사항

### 2.1 Core: 폰잠금 독서

#### 2.1.1 독서 세션 관리

| 기능 ID | 요구사항 | 우선순위 | Android | iOS | Web |
|---------|---------|---------|:-------:|:---:|:---:|
| CORE-001 | 독서 시작 시 화면 잠금 활성화 | P0 | ✅ Full | ⚠️ 제한적 | ⚠️ 제한적 |
| CORE-002 | 독서 타이머 표시 (경과/목표 시간) | P0 | ✅ | ✅ | ✅ |
| CORE-003 | 일일/주간/월간 독서 목표 설정 | P1 | ✅ | ✅ | ✅ |
| CORE-004 | 독서 중 긴급 알림만 허용 설정 | P1 | ✅ | ❌ | ❌ |
| CORE-005 | 독서 세션 일시정지/재개 | P1 | ✅ | ✅ | ✅ |
| CORE-006 | 백그라운드 타이머 유지 | P1 | ✅ | ⚠️ 15분 | ✅ |
| CORE-007 | 앱 이탈 감지 및 경고 | P2 | ✅ | ✅ | ✅ |

**플랫폼별 구현 전략:**

```
┌─────────────────────────────────────────────────────────────┐
│                    폰잠금 구현 전략                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  [Android]                                                  │
│  ├─ Foreground Service로 상시 실행                         │
│  ├─ SYSTEM_ALERT_WINDOW 권한으로 오버레이                   │
│  ├─ DND(Do Not Disturb) 모드 연동                          │
│  └─ 알림 차단 완벽 지원                                     │
│                                                             │
│  [iOS]                                                      │
│  ├─ Screen Time API 연동 안내 (설정 유도)                   │
│  ├─ Focus Mode 활성화 가이드                                │
│  ├─ 앱 이탈 시 타이머 일시정지 + 복귀 유도 알림             │
│  └─ 독서 완료 보상 극대화로 동기부여                        │
│                                                             │
│  [Web]                                                      │
│  ├─ Page Visibility API로 탭 이탈 감지                      │
│  ├─ Notification API로 복귀 알림                            │
│  ├─ 전체화면 모드 권장                                      │
│  └─ 브라우저 알림 차단 안내                                  │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 2.2 내 책장

#### 2.2.1 도서 관리

| 기능 ID | 요구사항 | 우선순위 | Android | iOS | Web |
|---------|---------|---------|:-------:|:---:|:---:|
| BOOK-001 | 네이버 책 API 연동 도서 검색 | P0 | ✅ | ✅ | ✅ |
| BOOK-002 | ISBN/바코드 스캔으로 도서 등록 | P0 | ✅ | ✅ | ✅* |
| BOOK-003 | 독서 상태 관리 (읽을 책/읽는 중/완독) | P0 | ✅ | ✅ | ✅ |
| BOOK-004 | 도서별 독서 진행률 기록 | P1 | ✅ | ✅ | ✅ |
| BOOK-005 | 책장 카테고리/태그 분류 | P2 | ✅ | ✅ | ✅ |
| BOOK-006 | 오프라인 책장 동기화 | P2 | ✅ | ✅ | ⚠️ |

*Web 바코드: WebRTC 카메라 접근 필요 (HTTPS 필수)

### 2.3 커뮤니티

#### 2.3.1 책속의 한줄

| 기능 ID | 요구사항 | 우선순위 | 플랫폼 |
|---------|---------|---------|:------:|
| COMM-001 | 도서별 인용구(책속의 한줄) 등록 | P0 | All |
| COMM-002 | 인용구에 대한 좋아요/저장 기능 | P1 | All |
| COMM-003 | 인용구 카드 이미지 생성 및 공유 | P1 | All |
| COMM-004 | 인기 인용구 피드 표시 | P2 | All |
| COMM-005 | SNS 공유 (Instagram, Twitter 등) | P2 | All |

#### 2.3.2 감상평

| 기능 ID | 요구사항 | 우선순위 | 플랫폼 |
|---------|---------|---------|:------:|
| COMM-006 | 도서별 간단 감상평 작성 (500자 이내) | P0 | All |
| COMM-007 | 별점 평가 (1-5점) | P0 | All |
| COMM-008 | 스포일러 태그 기능 | P1 | All |
| COMM-009 | 감상평 댓글 및 대댓글 | P2 | All |
| COMM-010 | 팔로우/팔로잉 시스템 | P2 | All |

### 2.4 독립서점 지도

| 기능 ID | 요구사항 | 우선순위 | Android | iOS | Web |
|---------|---------|---------|:-------:|:---:|:---:|
| MAP-001 | 현재 위치 기반 주변 독립서점 표시 | P1 | ✅ | ✅ | ✅ |
| MAP-002 | 서점 상세정보 (영업시간, 특징) | P1 | ✅ | ✅ | ✅ |
| MAP-003 | 서점 방문 인증 (GPS 체크인) | P2 | ✅ | ✅ | ⚠️ |
| MAP-004 | 서점 리뷰 및 평점 | P2 | ✅ | ✅ | ✅ |
| MAP-005 | 서점 네비게이션 연동 | P2 | ✅ | ✅ | ✅ |
| MAP-006 | 서점에서 도서 구매 연동 | P3 | ✅ | ✅ | ✅ |

**지도 구현:**
- Android/iOS: `google_maps_flutter` 패키지
- Web: Google Maps JavaScript API (또는 Kakao/Naver Map)

### 2.5 AI 분석 및 추천

| 기능 ID | 요구사항 | 우선순위 | 플랫폼 |
|---------|---------|---------|:------:|
| AI-001 | 개인 독서 통계 대시보드 | P1 | All |
| AI-002 | 독서 성향 프로파일 생성 | P1 | All |
| AI-003 | 유사 성향 사용자 매칭 | P2 | All |
| AI-004 | 협업 필터링 기반 도서 추천 | P2 | All |
| AI-005 | 추천 근거 설명 제공 | P2 | All |
| AI-006 | 독서 패턴 분석 (시간대, 장르) | P2 | All |

### 2.6 게이미피케이션

| 기능 ID | 요구사항 | 우선순위 | 플랫폼 |
|---------|---------|---------|:------:|
| GAME-001 | 기본 아바타 생성 및 커스터마이징 | P2 | All |
| GAME-002 | 마이룸 공간 꾸미기 | P2 | All |
| GAME-003 | 인앱 재화 (코인) 시스템 | P2 | All |
| GAME-004 | 아이템 상점 | P2 | All |
| GAME-005 | 독서 뱃지 및 칭호 시스템 | P2 | All |
| GAME-006 | 일일 출석 보상 | P3 | All |
| GAME-007 | 독서 챌린지 | P3 | All |

### 2.7 결제 및 구독

| 기능 ID | 요구사항 | 우선순위 | Android | iOS | Web |
|---------|---------|---------|:-------:|:---:|:---:|
| PAY-001 | 프리미엄 구독 결제 | P2 | Google Play | App Store | Stripe |
| PAY-002 | 코인 인앱 구매 | P2 | Google Play | App Store | Stripe |
| PAY-003 | 구독 상태 동기화 | P2 | ✅ | ✅ | ✅ |
| PAY-004 | 영수증 검증 | P2 | ✅ | ✅ | ✅ |

**결제 구현:**
- Android: `in_app_purchase` + Google Play Billing
- iOS: `in_app_purchase` + StoreKit
- Web: Stripe Checkout / 토스페이먼츠

---

## 3. 비기능 요구사항

### 3.1 성능

| 항목 | 목표 | 측정 방법 |
|-----|------|---------|
| 앱 시작 시간 (Cold Start) | < 2초 | Firebase Performance |
| API 응답 시간 | < 200ms (p95) | Backend 모니터링 |
| 프레임 레이트 | 60fps | Flutter DevTools |
| 앱 크기 | < 30MB (Android), < 50MB (iOS) | 빌드 결과 |
| 오프라인 지원 | 기본 기능 동작 | 수동 테스트 |

### 3.2 보안

- OAuth 2.0 기반 소셜 로그인 (Google, Apple, Kakao)
- JWT 토큰 기반 인증 (Access + Refresh Token)
- 개인정보 암호화 저장 (AES-256)
- HTTPS 필수 (Certificate Pinning)
- 생체인증 지원 (지문/Face ID)
- GDPR/개인정보보호법 준수

### 3.3 확장성

- 마이크로서비스 아키텍처
- 수평적 확장 가능한 인프라
- CDN 활용한 정적 자원 배포
- 실시간 기능: WebSocket / Firebase Realtime

### 3.4 접근성

- 다크 모드 지원
- 폰트 크기 조절
- 스크린 리더 지원 (Semantics)
- 고대비 모드

---

## 4. 기술 스택

### 4.1 Frontend (Flutter)

```yaml
# pubspec.yaml 주요 의존성

dependencies:
  flutter:
    sdk: flutter
  
  # 상태 관리
  flutter_riverpod: ^2.4.0      # 또는 flutter_bloc
  
  # 네트워킹
  dio: ^5.3.0                    # HTTP 클라이언트
  retrofit: ^4.0.0               # API 타입 세이프티
  
  # 로컬 저장소
  hive: ^2.2.0                   # NoSQL 로컬 DB
  hive_flutter: ^1.1.0
  shared_preferences: ^2.2.0     # 간단한 설정 저장
  
  # 인증
  firebase_auth: ^4.15.0
  google_sign_in: ^6.1.0
  sign_in_with_apple: ^5.0.0
  kakao_flutter_sdk: ^1.6.0
  
  # 카메라/바코드
  mobile_scanner: ^3.5.0         # 바코드 스캔
  
  # 지도
  google_maps_flutter: ^2.5.0
  geolocator: ^10.1.0
  
  # UI/UX
  flutter_animate: ^4.3.0        # 애니메이션
  cached_network_image: ^3.3.0   # 이미지 캐싱
  shimmer: ^3.0.0                # 로딩 스켈레톤
  
  # 결제
  in_app_purchase: ^3.1.0
  
  # 푸시 알림
  firebase_messaging: ^14.7.0
  flutter_local_notifications: ^16.2.0
  
  # 분석
  firebase_analytics: ^10.7.0
  firebase_crashlytics: ^3.4.0
  
  # 유틸리티
  freezed_annotation: ^2.4.0     # Immutable 모델
  json_annotation: ^4.8.0        # JSON 직렬화
  intl: ^0.18.0                  # 국제화
```

### 4.2 Backend

```
┌─────────────────────────────────────────────────────────────┐
│                     Backend Architecture                     │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  [API Gateway]                                              │
│       │                                                     │
│       ├── Auth Service (인증/인가)                          │
│       │     └─ JWT, OAuth, 소셜 로그인                      │
│       │                                                     │
│       ├── User Service (사용자/프로필)                      │
│       │     └─ PostgreSQL                                   │
│       │                                                     │
│       ├── Book Service (도서/책장)                          │
│       │     └─ PostgreSQL + Elasticsearch                   │
│       │                                                     │
│       ├── Community Service (인용구/리뷰/피드)              │
│       │     └─ PostgreSQL + Redis (캐시)                    │
│       │                                                     │
│       ├── Map Service (독립서점)                            │
│       │     └─ PostgreSQL (PostGIS)                         │
│       │                                                     │
│       ├── AI Service (추천/분석)                            │
│       │     └─ Python + ML 모델                             │
│       │                                                     │
│       ├── Gamification Service (아바타/아이템)              │
│       │     └─ PostgreSQL + Redis                           │
│       │                                                     │
│       └── Notification Service (푸시/알림)                  │
│             └─ Firebase Cloud Messaging                     │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│  Tech Stack                                                 │
│  • Framework: FastAPI (Python) 또는 NestJS (TypeScript)    │
│  • Database: PostgreSQL 15+                                 │
│  • Cache: Redis 7+                                          │
│  • Search: Elasticsearch 8+                                 │
│  • Message Queue: RabbitMQ 또는 Redis Streams               │
│  • Storage: AWS S3 / GCP Cloud Storage                      │
└─────────────────────────────────────────────────────────────┘
```

### 4.3 Infrastructure

```
┌─────────────────────────────────────────────────────────────┐
│                    Infrastructure (AWS)                      │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  [CDN] CloudFront                                           │
│     │                                                       │
│     ├── Web App (S3 + CloudFront)                          │
│     │                                                       │
│     └── API ──► [ALB] ──► [ECS Fargate]                    │
│                               │                             │
│                    ┌──────────┼──────────┐                  │
│                    ▼          ▼          ▼                  │
│               [Service]  [Service]  [Service]               │
│                    │          │          │                  │
│              ┌─────┴──────────┴──────────┴─────┐            │
│              │         Data Layer              │            │
│              │  ┌─────┐  ┌─────┐  ┌─────────┐  │            │
│              │  │ RDS │  │Redis│  │   S3    │  │            │
│              │  │(PG) │  │     │  │(Storage)│  │            │
│              │  └─────┘  └─────┘  └─────────┘  │            │
│              └─────────────────────────────────┘            │
│                                                             │
│  Monitoring: CloudWatch, X-Ray                              │
│  CI/CD: GitHub Actions + AWS CodePipeline                   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 4.4 External Services

| 서비스 | 용도 | 비고 |
|-------|------|------|
| 네이버 책 API | 도서 검색 | 무료 (일 25,000건) |
| Kakao Map API | 지도 (한국) | 무료 티어 있음 |
| Firebase | 인증, 푸시, 분석 | 무료 티어 충분 |
| Sentry | 에러 트래킹 | 무료 티어 있음 |
| Amplitude | 사용자 분석 | 무료 티어 있음 |

---

## 5. 릴리스 로드맵

### 5.1 Phase별 계획

```
┌─────────────────────────────────────────────────────────────┐
│                     Development Timeline                     │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  Phase 0: 설계 (2주)                                        │
│  ├─ 아키텍처 설계                                           │
│  ├─ UI/UX 디자인 (Figma)                                   │
│  ├─ API 스펙 확정                                           │
│  └─ 개발 환경 구축                                          │
│                                                             │
│  Phase 1: MVP (6주) ─────────────────── 2025 Q2            │
│  ├─ 인증 (소셜 로그인)                                      │
│  ├─ 내 책장 (네이버 API 연동)                               │
│  ├─ 바코드 스캔                                             │
│  ├─ 독서 타이머 (폰잠금)                                    │
│  ├─ 기본 감상평                                             │
│  └─ Android/iOS 빌드                                        │
│                                                             │
│  Phase 2: Beta (4주) ─────────────────── 2025 Q3           │
│  ├─ 책속의 한줄                                             │
│  ├─ 독립서점 지도                                           │
│  ├─ 기본 통계 대시보드                                      │
│  ├─ 팔로우/피드                                             │
│  └─ Web 버전 배포                                           │
│                                                             │
│  Phase 3: 1.0 (4주) ─────────────────── 2025 Q4            │
│  ├─ AI 추천 시스템                                          │
│  ├─ 유사 사용자 매칭                                        │
│  ├─ 프리미엄 구독 결제                                      │
│  └─ 성능 최적화                                             │
│                                                             │
│  Phase 4: 2.0 (4주) ─────────────────── 2026 Q1            │
│  ├─ 아바타/마이룸                                           │
│  ├─ 아이템 상점                                             │
│  ├─ 독서 챌린지                                             │
│  └─ 도서 구매 연동                                          │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 5.2 Phase별 상세 마일스톤

| Phase | 기간 | 산출물 | 배포 |
|-------|-----|-------|------|
| MVP | 6주 | 핵심 기능 앱 | 내부 테스트 (TestFlight/Internal) |
| Beta | 4주 | 커뮤니티 기능 | Closed Beta (초대) |
| 1.0 | 4주 | AI 추천 + 결제 | Public Launch |
| 2.0 | 4주 | 게이미피케이션 | Feature Update |

---

## 6. 수익 모델

| 수익원 | 설명 | 예상 비중 |
|-------|------|---------|
| 프리미엄 구독 | 무제한 책장, AI 분석, 프리미엄 아이템 | 40% |
| 인앱 구매 | 아바타 아이템, 마이룸 꾸미기 아이템 | 25% |
| 도서 구매 수수료 | 독립서점/온라인 서점 제휴 수수료 | 20% |
| 광고 | 출판사 신간 프로모션, 서점 광고 | 15% |

### 6.1 구독 플랜

| 플랜 | 가격 | 혜택 |
|-----|------|------|
| Free | ₩0 | 책장 50권, 월 10개 한줄, 기본 통계 |
| Premium | ₩4,900/월 | 무제한 책장/한줄, AI 분석, 광고 제거 |
| Premium+ | ₩7,900/월 | Premium + 프리미엄 아이템, 독서 리포트 |

---

## 7. 성공 지표 (KPI)

| 지표 | MVP | 1.0 | 2.0 |
|-----|-----|-----|-----|
| MAU (월간 활성 사용자) | 10,000 | 50,000 | 200,000 |
| DAU/MAU (스티키니스) | 20% | 30% | 40% |
| 평균 독서 세션 시간 | 15분 | 25분 | 35분 |
| 프리미엄 전환율 | 3% | 5% | 8% |
| NPS (순추천지수) | 30 | 45 | 60 |
| 앱 스토어 평점 | 4.0+ | 4.3+ | 4.5+ |
| 크래시 프리 사용자 | 99% | 99.5% | 99.9% |

---

## 8. 리스크 및 대응 방안

| 리스크 | 영향도 | 가능성 | 대응 방안 |
|-------|-------|-------|---------|
| iOS 폰잠금 제한 | 높음 | 확정 | 대안 UX (Focus Mode 연동, 보상 강화) |
| 네이버 책 API 정책 변경 | 높음 | 낮음 | 다중 API 확보 (알라딘, Yes24, Google Books) |
| App Store 심사 리젝 | 중간 | 중간 | 가이드라인 사전 검토, 단계적 기능 추가 |
| Flutter Web 성능 이슈 | 중간 | 중간 | CanvasKit 렌더러, 코드 스플리팅 |
| 경쟁 서비스 출현 | 중간 | 높음 | 커뮤니티/독립서점 연계 차별화 |
| 초기 사용자 확보 | 중간 | 중간 | 독서모임/독립서점 파트너십, 인플루언서 |

---

## 9. 프로젝트 구조

```
readlock/
├── apps/
│   ├── mobile/                 # Flutter 모바일 앱
│   │   ├── android/
│   │   ├── ios/
│   │   └── lib/
│   │       ├── core/           # 공통 유틸, 상수, 테마
│   │       ├── data/           # Repository, DataSource
│   │       ├── domain/         # Entity, UseCase
│   │       ├── presentation/   # UI, ViewModel
│   │       └── main.dart
│   │
│   ├── web/                    # Flutter 웹 (같은 코드베이스)
│   │
│   └── backend/                # FastAPI 백엔드
│       ├── app/
│       │   ├── api/            # API 라우터
│       │   ├── core/           # 설정, 보안
│       │   ├── models/         # DB 모델
│       │   ├── schemas/        # Pydantic 스키마
│       │   ├── services/       # 비즈니스 로직
│       │   └── main.py
│       ├── tests/
│       └── requirements.txt
│
├── packages/                   # 공유 패키지
│   ├── api_client/             # API 클라이언트
│   ├── models/                 # 공유 모델
│   └── utils/                  # 유틸리티
│
├── docs/                       # 문서
│   ├── PRD.md
│   ├── API_SPEC.md
│   └── DATA_MODEL.md
│
└── infra/                      # 인프라
    ├── terraform/
    └── docker/
```

---

## 부록 A: 화면 흐름도

```
┌─────────────────────────────────────────────────────────────┐
│                     ReadLock 2.0 Flow                        │
└─────────────────────────────────────────────────────────────┘

[스플래시] → [온보딩 (최초 1회)]
                    ↓
            [로그인/회원가입]
                    ↓
              ┌─────────┐
              │  홈 화면 │
              └────┬────┘
                   │
    ┌──────┬──────┼──────┬──────┐
    ↓      ↓      ↓      ↓      ↓
  [홈]  [책장]  [발견]  [아바타] [My]
    │      │      │      │      │
    │      │      │      │      └─► [통계]
    │      │      │      │          [설정]
    │      │      │      │          [프리미엄]
    │      │      │      │
    │      │      │      └─► [아바타 편집]
    │      │      │          [마이룸]
    │      │      │          [상점]
    │      │      │
    │      │      └─► [서점 지도]
    │      │          [피드]
    │      │          [검색]
    │      │
    │      └─► [책 검색] ──► [책 상세]
    │          [바코드]         │
    │                     ┌────┴────┐
    │                     ↓         ↓
    │               [한줄 작성] [감상평]
    │
    └─► [오늘 목표]
        [추천 도서]
        [인기 한줄]
            │
            ↓
      ┌───────────┐
      │ 독서 모드  │ ◄── 폰잠금 활성화
      │ (타이머)   │
      └─────┬─────┘
            │
            ↓
      [독서 완료]
            │
            ↓
    [보상: 코인 + EXP + 뱃지]
```

---

## 부록 B: 플랫폼별 스토어 가이드라인 체크리스트

### Google Play Store
- [x] 타겟 API 레벨 34 이상
- [ ] 데이터 안전 섹션 작성
- [ ] 앱 콘텐츠 등급 설정
- [ ] 개인정보처리방침 URL

### Apple App Store  
- [ ] 앱 추적 투명성 (ATT) 구현
- [ ] Sign in with Apple 필수
- [ ] 개인정보처리방침 URL
- [ ] 인앱 결제 외 결제 수단 금지 주의

### Web (PWA)
- [ ] HTTPS 필수
- [ ] Service Worker 등록
- [ ] Web App Manifest
- [ ] 반응형 디자인
